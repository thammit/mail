<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
      xmlns:f="http://typo3.org/ns/TYPO3/Fluid/ViewHelpers"
      xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
      xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
      xmlns:mail="http://typo3.org/ns/MEDIAESSENZ/Mail/ViewHelpers"
      data-namespace-typo3-fluid="true">

<h2>
    <f:translate key="{lll}report.performance"/>
</h2>

<div class="panel panel-default mb-3">
    <div class="table-fit">
        <table class="table table-striped table-hover">
            <f:if condition="{mail.plainAndHtml}">
                <thead>
                <tr>
                    <th></th>
                    <th>
                        <f:translate key="{lll}report.total"/>
                    </th>
                    <f:if condition="{mail.html}">
                        <th>
                            <f:translate key="{lll}report.html"/>
                        </th>
                    </f:if>
                    <f:if condition="{mail.plain}">
                        <th>
                            <f:translate key="{lll}report.plainText"/>
                        </th>
                    </f:if>
                </tr>
                </thead>
            </f:if>
            <tbody>
            <tr>
                <th>
                    <f:translate key="{lll}report.mailsSent"/>
                </th>
                <td><f:render partial="ProgressBar" arguments="{mail:mail}"/></td>
                <f:if condition="{mail.plainAndHtml}">
                    <td>{data.htmlSent}</td>
                    <td>{data.plainSent}</td>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.deliveryFailed"/>
                </th>
                <td>
                    <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="{data.returnedPercent}" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: {data.returnedPercent}%">{data.failedResponses} / {data.returnedPercent}%</div>
                    </div>
                </td>
                <f:if condition="{mail.plainAndHtml}">
                   <td></td>
                   <td></td>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.html.mailsViewed"/>
                </th>
                <f:if condition="{mail.plainAndHtml}">
                    <f:then>
                        <td></td>
                        <td>{data.htmlViewed}</td>
                        <td>{data.plainViewed}</td>
                    </f:then>
                    <f:else>
                        <f:if condition="{mail.html}">
                            <td>
                                <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="{data.viewedPercent}" aria-valuemin="0" aria-valuemax="100">
                                    <div class="progress-bar" style="width: {data.viewedPercent}%">{data.htmlViewed}</div>
                                </div>
                            </td>
                        </f:if>
                        <f:if condition="{mail.plain}">
                            <td>{data.plainViewed}</td>
                        </f:if>
                    </f:else>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.total.responses"/>
                </th>
                <td>{data.totalResponses}</td>
                <f:if condition="{mail.plainAndHtml}">
                    <td>{data.htmlResponses}</td>
                    <td>{data.plainResponses}</td>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.uniqueResponses"/>
                </th>
                <td>{data.uniqueResponsesTotal}</td>
                <f:if condition="{mail.plainAndHtml}">
                    <td>{data.uniqueResponsesHtml}</td>
                    <td>{data.uniqueResponsesPlain}</td>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.performance.linksClickedPerRespondent"/>
                </th>
                <td>{data.totalResponsesVsUniqueResponses}</td>
                <f:if condition="{mail.plainAndHtml}">
                    <td>{data.htmlResponsesVsUniqueResponses}</td>
                    <td>{data.plainResponsesVsUniqueResponses}</td>
                </f:if>
            </tr>
            </tbody>
        </table>
    </div>
</div>

</html>
