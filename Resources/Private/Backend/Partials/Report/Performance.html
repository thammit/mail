<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"
      xmlns:f="http://typo3.org/ns/TYPO3/Fluid/ViewHelpers"
      xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
      xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
      xmlns:mail="http://typo3.org/ns/MEDIAESSENZ/Mail/ViewHelpers"
      data-namespace-typo3-fluid="true">

<h2>
    <f:translate key="{lll}report.performance"/>
</h2>

<div class="panel panel-default mb-3">
    <div class="table-fit">
        <table class="table table-striped table-hover">
            <f:if condition="{mail.plainAndHtml}">
                <thead>
                <tr>
                    <th></th>
                    <th class="col-title col-responsive">
                        <f:translate key="{lll}report.total"/>
                    </th>
                    <f:if condition="{mail.html}">
                        <th>
                            <f:translate key="{lll}report.html"/>
                        </th>
                    </f:if>
                    <f:if condition="{mail.plain}">
                        <th>
                            <f:translate key="{lll}report.plainText"/>
                        </th>
                    </f:if>
                </tr>
                </thead>
            </f:if>
            <tbody>
            <tr>
                <th>
                    <f:translate key="{lll}report.mailsSent"/>
                </th>
                <td class="col-title col-responsive">
                    <div class="progress" role="progressbar" title="{data.totalSent} / {mail.numberOfRecipientsHandled}" aria-label="{f:translate(key:'{lll}report.mailsSent')}" aria-valuenow="{data.totalSentPercent}" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: {data.totalSentPercent}%">{data.totalSentPercent}%</div>
                    </div>
                </td>
                <f:if condition="{mail.plainAndHtml}">
                    <td>{data.htmlSent}</td>
                    <td>{data.plainSent}</td>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.deliveryFailed"/>
                </th>
                <td class="col-title col-responsive">
                    <div class="progress" role="progressbar" title="{data.failedResponses} / {data.totalSent}" aria-label="{f:translate(key:'{lll}report.deliveryFailed')}" aria-valuenow="{data.failedResponsesPercent}" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: {data.failedResponsesPercent}%">{data.failedResponsesPercent}%</div>
                    </div>
                </td>
                <f:if condition="{mail.plainAndHtml}">
                   <td></td>
                   <td></td>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.html.mailsViewed"/>
                </th>
                <f:if condition="{mail.plainAndHtml}">
                    <f:then>
                        <td></td>
                        <td>{data.htmlViewed}</td>
                        <td>{data.plainViewed}</td>
                    </f:then>
                    <f:else>
                        <f:if condition="{mail.html}">
                            <td class="col-title col-responsive">
                                <div class="progress" role="progressbar" title="{data.uniquePingResponses} / {data.htmlSent}" aria-label="{f:translate(key:'{lll}report.html.mailsViewed')}" aria-valuenow="{data.viewedPercent}" aria-valuemin="0" aria-valuemax="100">
                                    <div class="progress-bar" style="width: {data.htmlViewedPercent}%">{data.htmlViewedPercent}%</div>
                                </div>
                            </td>
                        </f:if>
                        <f:if condition="{mail.plain}">
                            <td>{data.plainViewed}</td>
                        </f:if>
                    </f:else>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.total.responses"/>
                </th>
                <td class="col-title col-responsive text-end"><span class="badge rounded-pill bg-mail-theme pb-1">{data.totalResponses}</span></td>
                <f:if condition="{mail.plainAndHtml}">
                    <td><span class="badge rounded-pill bg-mail-theme pb-1">{data.htmlResponses}</span></td>
                    <td><span class="badge rounded-pill bg-mail-theme pb-1">{data.plainResponses}</span></td>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.uniqueResponses"/>
                </th>
                <td class="col-title col-responsive">
                    <div class="progress" role="progressbar" title="{data.uniqueResponsesTotal} / {data.totalSent}" aria-label="{f:translate(key:'{lll}report.uniqueResponses')}" aria-valuenow="{data.uniqueResponsesTotalPercent}" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar" style="width: {data.uniqueResponsesTotalPercent}%">{data.uniqueResponsesTotalPercent}%</div>
                    </div>
                </td>
                <f:if condition="{mail.plainAndHtml}">
                    <td>{data.uniqueResponsesHtml}</td>
                    <td>{data.uniqueResponsesPlain}</td>
                </f:if>
            </tr>
            <tr>
                <th>
                    <f:translate key="{lll}report.performance.linksClickedPerRespondent"/>
                </th>
                <td class="col-title col-responsive text-end">{data.totalResponsesVsUniqueResponses}</td>
                <f:if condition="{mail.plainAndHtml}">
                    <td>{data.htmlResponsesVsUniqueResponses}</td>
                    <td>{data.plainResponsesVsUniqueResponses}</td>
                </f:if>
            </tr>
            </tbody>
        </table>
    </div>
</div>

</html>
